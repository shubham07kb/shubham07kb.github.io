<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My App</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsonwebtoken/8.5.1/jsonwebtoken.min.js"></script>
    <style id="style"></style>
</head>

<body id="body">
    <noscript>Please Enable Javascript to Use this Page</noscript>
    <div id="main"></div>
    <script>
        sitepath = "/myapp";
        sitename = "My App";
        class Account {
            constructor(ms = "", ty = "", un = "", pn = "") { this.ms = ms; }
            set(ms = "", ty = "", un = "", pn = "") { this.ms = ms; this.ty = ty; this.un = un; this.pn = pn; }
            getms() { return this.ms; }
            getty() { return this.ty; }
            getun() { return this.un; }
            getpn() { return this.pn; }
            get() { return this; }
        }
        account = new Account();
        loginpagehtm = `<div class="box-form"><div class="left"><div class="overlay"><h1>Hello World.</h1><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur et est sed felis aliquet sollicitudin</p></div></div><div class="right"><h5>Login</h5><p class="error"></p><div class="inputs"><input type="text" placeholder="user name" id="username" autocomplete="username"><br><input type="password" placeholder="password" id="password" autocomplete="current-password"></div><br><br><div class="remember-me--forget-password"><label><input type="checkbox" name="item" id="rm" checked="checked"><span class="text-checkbox">Remember me</span></label></div><br><button id="loginbtn" onclick="loginclick()">Login</button></div></div>`;
        loginpagecss = `body { background-image: linear-gradient(135deg, #FAB2FF 10%, #1904E5 100%); background-size: cover; background-repeat: no-repeat; background-attachment: fixed; font-family: "Open Sans", sans-serif; color: #333333; } .box-form { margin: 0 auto; width: 80%; background: #FFFFFF; border-radius: 10px; overflow: hidden; display: flex; flex: 1 1 100%; align-items: stretch; justify-content: space-between; box-shadow: 0 0 20px 6px #090b6f85; } @media (max-width: 980px) { .box-form { flex-flow: wrap; text-align: center; align-content: center; align-items: center; } } .box-form div { height: auto; } .box-form .left { color: #FFFFFF; background-size: cover; background-repeat: no-repeat; background-image: url("https://i.pinimg.com/736x/5d/73/ea/5d73eaabb25e3805de1f8cdea7df4a42--tumblr-backgrounds-iphone-phone-wallpapers-iphone-wallaper-tumblr.jpg"); overflow: hidden; } .box-form .left .overlay { padding: 30px; width: 100%; height: 100%; background: #5961f9ad; overflow: hidden; box-sizing: border-box; } .box-form .left .overlay h1 { font-size: 10vmax; line-height: 1; font-weight: 900; margin-top: 40px; margin-bottom: 20px; } .box-form .left .overlay span p { margin-top: 30px; font-weight: 900; } .box-form .left .overlay span a { background: #3b5998; color: #FFFFFF; margin-top: 10px; padding: 14px 50px; border-radius: 100px; display: inline-block; box-shadow: 0 3px 6px 1px #042d4657; } .box-form .left .overlay span a:last-child { background: #1dcaff; margin-left: 30px; } .box-form .right { padding: 40px; overflow: hidden; } @media (max-width: 980px) { .box-form .right { width: 100%; } } .box-form .right h5 { font-size: 6vmax; line-height: 0; } .box-form .right p { font-size: 14px; color: #B0B3B9; } .box-form .right .inputs { overflow: hidden; } .box-form .right input { width: 100%; padding: 10px; margin-top: 25px; font-size: 16px; border: none; outline: none; border-bottom: 2px solid #B0B3B9; } .box-form .right .remember-me--forget-password { display: flex; justify-content: space-between; align-items: center; } .box-form .right .remember-me--forget-password input { margin: 0; margin-right: 7px; width: auto; } .box-form .right button { float: right; color: #fff; font-size: 16px; padding: 12px 35px; border-radius: 50px; display: inline-block; border: 0; outline: 0; box-shadow: 0px 4px 20px 0px #49c628a6; background-image: linear-gradient(135deg, #70F570 10%, #49C628 100%); } label { display: block; position: relative; margin-left: 30px; } label::before { content: ' \f00c'; position: absolute; font-family: FontAwesome; background: transparent; border: 3px solid #70F570; border-radius: 4px; color: transparent; left: -30px; transition: all 0.2s linear; } label:hover::before { font-family: FontAwesome; content: ' \f00c'; color: #fff; cursor: pointer; background: #70F570; } label:hover::before .text-checkbox { background: #70F570; } label span.text-checkbox { display: inline-block; height: auto; position: relative; cursor: pointer; transition: all 0.2s linear; } label input[type="checkbox"] { display: none; } `;
        topoption1 = `<div class="option-bar"><div class="buttons"><button class="button edit">Edit</button><button class="button add">Add</button></div><div class="search-bar"><i class="fas fa-search search-icon"></i><input type="text" placeholder="Search Keyword"></div></div>`;
        async function loadUrlData() { var ud = {}; ud['fu'] = window.location.href; ud['pr'] = window.location.protocol; ud['pr'] = ud['pr'].slice(0, -1); ud['do'] = window.location.host; ud['pa'] = window.location.pathname; ud['paarr'] = window.location.pathname.split('/'); ud['paarr'].shift(); if (ud['paarr'][0] != '' && ud['paarr'][ud['paarr'].length - 1] == '') { ud['paarr'].pop(); } ud['qu'] = window.location.search; var usef = new URLSearchParams(ud['qu']); var us = []; for (const [key, value] of usef) { us[key] = value; } ud['quarr'] = us; return ud; }
        async function psi(a, b = sitename) {
            let stateObj = { id: "100" };
            window.history.pushState(stateObj, b, sitepath + a);
            loadpage();
        }
        async function loadpage() {
            ud = await loadUrlData();
            const sepl = sitepath.split('/').length;
            for (let i = 0; i < sepl - 1; i++) {
                ud['paarr'].shift();
            }
            if (ud['paarr'].length == 0) {
                ud['paarr'].push('home');
            }
            ud['paarr'].unshift("");
            udp = ud['paarr'];
            if (udp[1] == "logout") {
                let stateObj = { id: "100" };
                window.history.pushState(stateObj, sitename, sitepath);
                logout(1);
            } else if (udp[1] == "home" && udp.length == 2) {
                gebi("content").innerHTML = `<div class="container"><h1>Home Page</h1><div class="button-grid"><button onclick='psi("/details")'>Details</button><button onclick='psi("/passwords")'>Passowrd</button><button onclick='psi("/points")'>Points</button><button onclick='psi("/notes")'>Notes</button><button onclick='psi("/drama")'>Dramas</button><button onclick='psi("/dramaLoc")'>Drama Type</button><button onclick='psi("/episodes")'>Episodes</button><button onclick='psi("/movies")'>Movies</button><button onclick='psi("/moviesLoc")'>Movie Location</button><button onclick='psi("/links")'>Links</button></div></div>`;
            } else if (udp[1] == "profile" && udp.length == 2) {
                let acctype = account.getty();
                if (acctype == "rw") {
                    acctype = "Read Write (Editable)";
                } else if (account.getty() == "ro") {
                    acctype = "Read Only (Not Editable)";
                } else {
                    logout(1);
                    return;
                }
                let rmhtm = "";
                if (checkCookie("rm") && checkCookie("rmexp") && checkCookie("rmexp")) {
                    const rmut = new Date(getCookie("rmexp"));
                    const rmlt = rmut.toLocaleString();
                    rmhtm = `<tr><th>Remember Me</th><td>Enabled</td></tr><tr><th>Remember Me Expire At</th><td>` + rmlt + `</td></tr>`;
                } else {
                    rmhtm = `<tr><th>Remember Me</th><td>Disabled</td></tr>`;
                }
                gebi("content").innerHTML = `<div class="container"><h1>Profile Page</h1><div style="overflow-x:auto"><table style="width:100%"><tr><th>User Name</th><td>` + account.getun() + `</td></tr><tr></tr><th>Name</th><td>` + account.getpn() + `</td><tr><th>Account Type</th><td>` + acctype + `</td></tr>` + rmhtm + `</table></div></div>`;
            } else {
                console.log(udp);
                pages = {
                    "details": "Details",
                    "passwords": "Passwords",
                    "points": "Points",
                    "notes": "Notes",
                    "drama": "Dramas",
                    "dramaLoc": "Drama Type",
                    "dramaGenre": "Drama Genre",
                    "episodes": "Episodes",
                    "movies": "Movies",
                    "moviesLoc": "Movie Location",
                    "moviesGenre": "Movie Genre",
                    "links": "Links"
                }
                cont = `<div class="container">`;
                if (udp.length == 2 && udp[1] in pages) {
                    cont += `<h1>` + pages[udp[1]] + `</h1><div class="option-bar"><div class="buttons"><button onclick="psi('/`+udp[1]+`/edit')" class="button edit">Edit</button><button onclick="psi('/`+udp[1]+`/add')" class="button add">Add</button></div><div class="search-bar"><i class="fas fa-search search-icon"></i><input type="text" placeholder="Search Keyword"></div></div>`
                } else if (udp.length == 3 && account.getty() == "rw" && udp[2] == "edit" && udp[1] in pages) {
                    cont += `<h1>` + pages[udp[1]] + ` Edit Page</h1><div class="option-bar"><div class="buttons"><button onclick="psi('/`+udp[1]+`')" class="button edit">`+pages[udp[1]]+`</button><button class="button add">Save</button></div></div>`;
                } else if (udp.length == 3 && account.getty() == "rw" && udp[2] == "add" && udp[1] in pages) {
                    cont += `<h1>` + pages[udp[1]] + ` Add Page</h1><div class="option-bar"><div class="buttons"><button  onclick="psi('/`+udp[1]+`')" class="button edit">`+pages[udp[1]]+`</button><button class="button add">Save</button></div></div>`;
                } else if (udp.length == 3 && account.getty() == "ro" && udp[2] == "edit" && udp[1] in pages) {
                    cont += `<h1>` + pages[udp[1]] + ` Edit Page</h1><p>As an Read Only User, You Don't have Permisson to Access This Page</p>`;
                } else if (udp.length == 3 && account.getty() == "ro" && udp[2] == "add" && udp[1] in pages) {
                    cont += `<h1>` + pages[udp[1]] + ` Add Page</h1><p>As an Read Only User, You Don't have Permisson to Access This Page</p>`;
                } else {
                    cont += `<h1>404 Page Not Found</h1>`;
                }
                cont += `</div>`;
                gebi("content").innerHTML = cont;
            }
        }
        async function presettheme() { //#00cc66
            tcts = `.light { --button-primary: #007bff; --header-bg: #dcdcdc; --text: #333; --bg-checkbox: #111; --checkbox-ball: #fff; --bg-color: #f5f5f5; --search-bar-color: #111; } .dark { --button-primary: #00cc66; --header-bg: #0a0a0a; --text: #f5f5f5; --bg-checkbox: #fff; --checkbox-ball: #111; --bg-color: #333333; --search-bar-color: #ccc; } @import url("https://fonts.googleapis.com/css2?family=Pacifico&display=swap"); body { margin: 0; padding: 0; background-color: var(--bg-color); } header { position: fixed; top: 0; left: 0; right: 0; display: flex; justify-content: space-between; align-items: center; background-color: var(--header-bg); padding: 10px; color: var(--text); } .logo { display: flex; align-items: center; font-family: "Pacifico"; font-size: 24px; } .logout a { color: var(--text); text-decoration: none; } @media screen and (max-width: 600px) { .logo svg { height: 24px; } .toggle label { width: 30px; height: 18px; } .toggle-icon svg { height: 14px; } } @import url("https://fonts.googleapis.com/css2?family=Montserrat&display=swap"); * { box-sizing: border-box; } .checkbox { opacity: 0; position: absolute; } .checkbox-label { background-color: var(--bg-checkbox); width: 50px; height: 26px; border-radius: 50px; position: relative; padding: 5px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; } .fa-moon { color: #f1c40f; } .fa-sun { color: #f39c12; } .checkbox-label .ball { background-color: var(--checkbox-ball); width: 22px; height: 22px; position: absolute; left: 2px; top: 2px; border-radius: 50%; transition: transform 0.2s linear; } .checkbox:checked + .checkbox-label .ball { transform: translateX(24px); } #content { margin-top: 60px; } .container { text-align: center; padding: 20px; } h1 { color: var(--text); } .button-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); grid-gap: 10px; margin-top: 20px; } button { background-color: var(--button-primary); color: #fff; border: none; padding: 10px 20px; font-size: 16px; cursor: pointer; } @media screen and (max-width: 600px) { .button-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); } } table, th, td { border: 1px solid; border-collapse: collapse; border-color: var(--button-primary); color: var(--text) } p{color: var(--text);}`;
            topo1 = `.option-bar { display: flex; justify-content: center; align-items: center; padding: 10px; } .search-bar { display: flex; align-items: center; gap: 10px; margin-left: auto; margin-right: auto; } .search-bar input { width: 100%; max-width: 300px; padding: 8px; border: none; border-bottom: 1px solid var(--search-bar-color); outline: none; background: transparent; color: var(--search-bar-color); } .search-bar input::placeholder { color: var(--search-bar-color); } .search-icon { color: var(--search-bar-color); } .buttons { display: flex; gap: 10px; margin-left: auto; margin-right: auto; } .button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; } .button.add { background-color: #4CAF50; color: white; } .button.edit { background-color: #007bff; color: white; } @media screen and (max-width: 600px) { .option-bar { flex-direction: column; align-items: center; padding: 10px; } .buttons { margin-bottom: 10px; margin-left: auto; margin-right: auto; } }`;
            gebi("style").innerHTML = tcts + topo1;
            gebi("main").innerHTML = `<header><div class="logo" onclick="psi('/')">MyApp</div><div><input type="checkbox" class="checkbox" id="checkbox"><label for="checkbox" class="checkbox-label"><i class="fas fa-moon"></i><i class="fas fa-sun"></i><span class="ball"></span></label></div><div class="logout" onclick="psi('/profile')">` + account.getun() + `</div><div class="logout" onclick="psi('/logout')">Logout</div></header><div id="content"></div>`;
            if (checkCookie("theme") && (getCookie("theme") == "d" || getCookie("theme") == "l")) {
                if (getCookie("theme") == "d") {
                    gebi("checkbox").checked = true;
                    gebi("body").classList.add("dark");
                } else if (getCookie("theme") == "l") {
                    gebi("checkbox").checked = false;
                    gebi("body").classList.add("light");
                }
            } else {
                setCookie("theme", "d", 30);
                gebi("checkbox").checked = true;
                gebi("body").classList.add("dark");
            }
            gebi("checkbox").addEventListener("change", function () {
                if (this.checked) {
                    setCookie("theme", "d", 30);
                    gebi("body").classList.remove("light");
                    gebi("body").classList.add("dark");
                } else {
                    setCookie("theme", "l", 30);
                    gebi("body").classList.remove("dark");
                    gebi("body").classList.add("light");
                }
            });
            window.onpopstate = function (event) {
                loadpage();
            };
        }
        function loadlogin() {
            gebi("style").innerHTML = loginpagecss;
            gebi("main").innerHTML = loginpagehtm;
        }
        function cl(a) { console.log(a) } function print(a) { console.log(a) } function ct(a) { console.table(a) } function gebi(a) { return document.getElementById(a); } function gesbcn(a) { return document.getElementsByClassName(a); } function setls(a, b) { localStorage.setItem(a, b); } function getls(a) { return localStorage.getItem(a); } function removels(a) { localStorage.removeItem(a); } function clearls() { localStorage.clear(); }
        async function setCookie(cname, cvalue, exdays) { const d = new Date(); d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000)); let expires = "expires=" + d.toUTCString(); document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"; } function getCookie(cname) { let name = cname + "="; let ca = document.cookie.split(";"); for (let i = 0; i < ca.length; i++) { let c = ca[i]; while (c.charAt(0) == " ") { c = c.substring(1); } if (c.indexOf(name) == 0) { return c.substring(name.length, c.length); } } return ""; } function checkCookie(cname) { let va = getCookie(cname); if (va != "" && va != undefined) { return true; } else { return false; } } async function removeAllCookie() { var pairs = document.cookie.split(";"); var cookies = {}; for (var i = 0; i < pairs.length; i++) { var pair = pairs[i].split("="); setCookie(pair[0], '', -1); } } function deleteCookie(a) { setCookie(a, '', -1) }
        function setCookieAtPath(e, t, o, i) { const n = new Date; n.setTime(n.getTime() + 24 * o * 60 * 60 * 1e3); const c = "expires=" + n.toUTCString(); document.cookie = e + "=" + t + "; " + c + "; path=" + i }
        function getCookieExpiration(t) { const o = document.cookie.split(";"); for (let n = 0; n < o.length; n++) { const e = o[n].trim(); if (e.startsWith(t + "=")) { const t = e.split("=")[1]; return decodeURIComponent(t) } } return null }
        function generate32CharString(inputString) {
            let result = '';
            while (result.length < 32) {
                result += inputString;
            }
            return result.slice(0, 32);
        }
        async function makeChiper(pt, pa) {
            const plainText = pt;
            const password = generate32CharString(pa);
            const passwordData = new TextEncoder().encode(password);
            const passwordKey = await crypto.subtle.importKey(
                'raw',
                passwordData,
                { name: 'AES-CBC' },
                false,
                ['encrypt']
            );
            const iv = crypto.getRandomValues(new Uint8Array(16));
            const plainData = new TextEncoder().encode(plainText);
            const encryptedData = await crypto.subtle.encrypt(
                { name: 'AES-CBC', iv },
                passwordKey,
                plainData
            );
            const combinedData = new Uint8Array(iv.length + encryptedData.byteLength);
            combinedData.set(iv, 0);
            combinedData.set(new Uint8Array(encryptedData), iv.length);
            const encryptedText = btoa(String.fromCharCode(...combinedData));
            document.getElementById('encrypted').textContent = encryptedText;
        }
        function loginclick() {
            un = gebi("username").value;
            pa = gebi("password").value;
            rm = gebi("rm").checked;
            login(un, pa, rm);
        }
        async function login(un, pa, rm = false) {
            gebi("loginbtn").disabled = true;
            gebi("loginbtn").innerHTML = "Logging In...";
            const ua = {
                "Shub": {
                    "ci": "7g0EM2ejVO580RFjUsGC9EcJHg7vKWDPLu7QK6oxlYPWL4egNZ6p3KTlvM3KKQr7",
                    "name": "Shubham Kumar Bansal"
                },
                "Shubham": {
                    "ci": "R69ZfWdkECghrkLsQbT+bmPOBGpO7FtGfEv/unX1g4+HkPhejfF8w4n04tCyyrlg8D8UN5Ehv+1zESID9eV4kw==",
                    "name": "Shubham Kumar Bansal"
                }
            }
            if (un in ua) {
                const encryptedText = ua[un].ci;
                const aesPassword = generate32CharString(un + pa);
                const passwordData = new TextEncoder().encode(aesPassword);
                const passwordKey = await crypto.subtle.importKey(
                    'raw',
                    passwordData,
                    { name: 'AES-CBC' },
                    false,
                    ['decrypt']
                );
                try {
                    const encryptedData = new Uint8Array([...atob(encryptedText)].map(char => char.charCodeAt(0)));
                    const iv = encryptedData.slice(0, 16);
                    const decryptedData = await crypto.subtle.decrypt(
                        { name: 'AES-CBC', iv },
                        passwordKey,
                        encryptedData.slice(16)
                    );
                    const decryptedText = new TextDecoder().decode(decryptedData);
                    if (decryptedText[4] + decryptedText[5] == "RW" || decryptedText[4] + decryptedText[5] == "RO") {
                        stimef = getDate(0);
                        stime = stimef.inFixedString;
                        stimeStr = stime.year + stime.month + stime.date + stime.hour + stime.minute + stime.second + stime.millisecond;
                        acct = decryptedText[4] + decryptedText[5];
                        const data = {
                            payload: JSON.stringify({ "username": un, "name": ua[un].name, "ms": decryptedText, "acctype": acct.toLowerCase() }),
                            password: stimeStr
                        };
                        const params = new URLSearchParams();
                        for (const [key, value] of Object.entries(data)) {
                            params.append(key, value);
                        }
                        accd = await fetch("https://apify.cyclic.app/api/jwt/sign", {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded'
                            },
                            body: params.toString()
                        });
                        accd = await accd.json();
                        if (accd.status == 200) {
                            if (rm == true) {
                                const datarm = {
                                    payload: JSON.stringify({ "username": un, "password": pa }),
                                    password: stimeStr
                                };
                                const paramsrm = new URLSearchParams();
                                for (const [key, value] of Object.entries(datarm)) {
                                    paramsrm.append(key, value);
                                }
                                rmd = await fetch("https://apify.cyclic.app/api/jwt/sign", {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/x-www-form-urlencoded'
                                    },
                                    body: paramsrm.toString()
                                });
                                rmd = await rmd.json();
                                const d = new Date();
                                d.setTime(d.getTime() + (30 * 24 * 60 * 60 * 1000));
                                let expires = d.toUTCString();
                                setCookie("rm", rmd.token, 30);
                                setCookie("rmp", stimeStr, 30);
                                setCookie("rmexp", expires, 30);
                            }
                            setCookie("acc", accd.token, 1);
                            setCookie("accp", stimeStr, 1);
                            gebi("style").innerHTML = "body { display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }  #main { text-align: center; font-size: 24px; }";
                            gebi("main").innerHTML = "You are logged in, as " + ua[un].name + ", please wait...";
                            setTimeout(() => { accApply(); }, 1000);

                        } else {
                            gesbcn("error")[0].innerHTML = "Wrong Username or Password";
                            gebi("loginbtn").disabled = false;
                            gebi("loginbtn").innerHTML = "Login";
                        }
                    }
                } catch (e) {
                    gesbcn("error")[0].innerHTML = "Wrong Username or Password";
                    gebi("loginbtn").disabled = false;
                    gebi("loginbtn").innerHTML = "Login";
                }
            } else {
                gesbcn("error")[0].innerHTML = "Username Does Not Exist";
                gebi("loginbtn").disabled = false;
                gebi("loginbtn").innerHTML = "Login";
            }
        }
        function homepage() {

        }
        function str(a) {
            return a.toString();
        }
        function inFixedStr(a, b) {
            if (typeof a !== 'string') {
                a = str(a);
            }
            if (typeof a === 'string') {
                while (a.length < b) {
                    a = '0' + a;
                }
            }
            return a
        }
        function getDate(a = 0) {
            var cdate = new Date();
            cdate = new Date(cdate.getTime() + (a + cdate.getTimezoneOffset()) * 60000);
            cdate = { year: cdate.getFullYear(), month: cdate.getMonth() + 1, day: cdate.getDay(), date: cdate.getDate(), hour: cdate.getHours(), minute: cdate.getMinutes(), second: cdate.getSeconds(), millisecond: cdate.getMilliseconds() };
            cdate = { inNumber: { year: cdate.year, month: cdate.month, day: cdate.day, date: cdate.date, hour: cdate.hour, minute: cdate.minute, second: cdate.second, millisecond: cdate.millisecond }, inString: { year: str(cdate.year), month: str(cdate.month), day: str(cdate.day), date: str(cdate.date), hour: str(cdate.hour), minute: str(cdate.minute), second: str(cdate.second), millisecond: str(cdate.millisecond) }, inFixedString: { year: inFixedStr(cdate.year, 4), month: inFixedStr(cdate.month, 2), day: inFixedStr(cdate.day, 2), date: inFixedStr(cdate.date, 2), hour: inFixedStr(cdate.hour, 2), minute: inFixedStr(cdate.minute, 2), second: inFixedStr(cdate.second, 2), millisecond: inFixedStr(cdate.millisecond, 3) } };
            return cdate;
        }
        async function accApply() {
            if (checkCookie("acc") && checkCookie("accp")) {
                const data = {
                    token: getCookie("acc"),
                    password: getCookie("accp")
                };
                const params = new URLSearchParams();
                for (const [key, value] of Object.entries(data)) {
                    params.append(key, value);
                }
                acc = await fetch("https://apify.cyclic.app/api/jwt/verify", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: params.toString()
                });
                acc = await acc.json();
                if (acc.status == 200) {
                    account.set(acc.payload.ms, acc.payload.acctype, acc.payload.username, acc.payload.name);
                    await presettheme();
                    loadpage();
                } else {
                    rmApply();
                }
            } else {
                rmApply();
            }
        }
        async function rmApply() {
            if (checkCookie("rm") && checkCookie("rmp")) {
                const data = {
                    token: getCookie("rm"),
                    password: getCookie("rmp")
                };
                const params = new URLSearchParams();
                for (const [key, value] of Object.entries(data)) {
                    params.append(key, value);
                }
                rmacc = await fetch("https://apify.cyclic.app/api/jwt/verify", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: params.toString()
                });
                rmacc = await rmacc.json();
                if (rmacc.status == 200) {
                    login(rmacc.payload.username, rmacc.payload.password);
                } else {
                    logout(0);
                }
            } else {
                logout(0);
            }
        }
        function logout(a) {
            deleteCookie("rm"); deleteCookie("rmp"); deleteCookie("rmexp"); deleteCookie("acc"); deleteCookie("accp"); deleteCookie("theme");
            if (a == 0) { loadlogin(); } else if (a == 1) { location.reload(); }
        }
        const app = async () => {
            await accApply();
        }
        app();
    </script>
</body>

</html>
